# AGENTS.md

## Purpose
This document provides instructions for the OpenAI Codex agent to effectively navigate, understand, and contribute to the **codebase_to_text** project. Codex should follow these guidelines when generating code, refactoring, adding features, or summarizing content.

## Repository Structure

```
├── .github/workflows/       # CI and publishing workflows
├── codebase_to_text/        # Main package
│   ├── __init__.py
│   ├── codebase_to_text.py  # Contains CodebaseToText class and core logic
│   └── extractors/          # File-type extractor modules (if present)
├── docs/                    # Project documentation
├── tests/                   # Unit and integration tests
├── setup.py                 # Installation and console_scripts entry point
├── setup.cfg                # Configuration for packaging and linting
├── requirements.txt         # Dependencies
└── README.md                # Project overview
```

## Agent Workflows

### 1. Code Navigation
- **Locate modules:** Traverse the `codebase_to_text` directory to find classes and functions.
- **Identify entry points:** Examine `setup.py` for `console_scripts` definitions to understand CLI commands.
- **Review extractors:** Check if an `extractors` subpackage exists; otherwise, augment `codebase_to_text.py` with new file-type handlers.

### 2. Feature Development
- **Adding file-type support:**
  1. Extend or create an extractor function that reads content and metadata for the new extension.
  2. Register the extractor in the central dispatch (e.g., a mapping of extensions to handlers).
  3. Write or update tests in `tests/` for the new extractor.
- **CLI flags and options:**
  - `--input`: path or GitHub URL
  - `--output`: destination file path
  - `--output_type`: `txt` or `docx`
  - `--exclude`: patterns to skip files or directories
  - `--exclude_hidden`: boolean to skip hidden files
- **Performance and logging:**
  - Use progress callbacks or verbose flags to emit structured logs.
  - Ensure streaming large file outputs does not exhaust memory.

### 3. Refactoring and Maintenance
- **Code style:** Follow PEP8 conventions. Use existing linters configured in `setup.cfg`.
- **Type annotations:** Add or refine type hints for public methods in `CodebaseToText`.
- **Documentation:** Update `docs/` when APIs or CLI behaviors change.
- **Test coverage:** Guarantee new or changed code paths have corresponding tests in `tests/`.

### 4. Summarization Tasks
- **Folder-tree generation:** Read directory structure recursively, producing indented lists.
- **Content extraction:** For each file, capture path, extension, and text content, preserving formatting.
- **Output formatting:** Organize combined output with headers for sections: tree structure, file contents, and metadata.

## Best Practices for Codex

- **Prompt clarity:** Always include context comments (e.g., `# Python 3.8+, codebase-to-text extraction logic`).
- **Deterministic output:** Use low temperature settings (≤0.2) when generating code modifications.
- **Incremental changes:** Break larger refactorings into small, testable commits.
- **Error handling:** Validate input paths and emit user-friendly errors.
- **Security:** Do not execute untrusted code. Strip or flag potentially malicious constructs in extracted files.

## Required before completing a task

- All Tests pass
- Linting passed

## Pull Request Guidelines

- **Title format:** `[Feature]` or `[Fix]` prefix followed by concise description.
- **PR description:** Include summary, design decisions, and testing instructions.
- **Testing:** Attach test run logs or CI passes.
- **Review:** Suggest reviewers familiar with Python packaging or CLI tools.

---
*Generated by Codex agent based on OpenAI best practices for repository contributions.*
